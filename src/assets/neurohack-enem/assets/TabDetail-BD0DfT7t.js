import{j as e,c as a,k as s,p as t,T as r,q as i,B as o,d as n,h as d,n as l,C as c,o as m,l as u,r as x,s as p,U as h,G as g,i as f,Z as j,t as v,e as b,M as N,u as w,v as y,m as S,S as q,g as C,f as M,P as k,H as P}from"./ui-CrYyYaxT.js";import{r as E,d as _,h as A,L as D}from"./vendor-rodsj_b4.js";import{d as R,u as T,e as F,P as O,f as z,g as I,h as B,i as U,j as L,k as H,s as X,B as G,l as Q,C as $,m as V,n as W,o as Y,p as J,q as Z,r as K,t as ee,v as ae,T as se,a as te,b as re,c as ie,I as oe}from"./index-BzZWAwwb.js";var ne="ScrollArea",[de,le]=R(ne),[ce,me]=de(ne),ue=E.forwardRef((a,s)=>{const{__scopeScrollArea:t,type:r="hover",dir:i,scrollHideDelay:o=600,...n}=a,[d,l]=E.useState(null),[c,m]=E.useState(null),[u,x]=E.useState(null),[p,h]=E.useState(null),[g,f]=E.useState(null),[j,v]=E.useState(0),[b,N]=E.useState(0),[w,y]=E.useState(!1),[S,q]=E.useState(!1),C=T(s,e=>l(e)),M=F(i);return e.jsx(ce,{scope:t,type:r,dir:M,scrollHideDelay:o,scrollArea:d,viewport:c,onViewportChange:m,content:u,onContentChange:x,scrollbarX:p,onScrollbarXChange:h,scrollbarXEnabled:w,onScrollbarXEnabledChange:y,scrollbarY:g,onScrollbarYChange:f,scrollbarYEnabled:S,onScrollbarYEnabledChange:q,onCornerWidthChange:v,onCornerHeightChange:N,children:e.jsx(O.div,{dir:M,...n,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":b+"px",...a.style}})})});ue.displayName=ne;var xe="ScrollAreaViewport",pe=E.forwardRef((a,s)=>{const{__scopeScrollArea:t,children:r,nonce:i,...o}=a,n=me(xe,t),d=E.useRef(null),l=T(s,d,n.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(O.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:n.scrollbarXEnabled?"scroll":"hidden",overflowY:n.scrollbarYEnabled?"scroll":"hidden",...a.style},children:e.jsx("div",{ref:n.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});pe.displayName=xe;var he="ScrollAreaScrollbar",ge=E.forwardRef((a,s)=>{const{forceMount:t,...r}=a,i=me(he,a.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:n}=i,d="horizontal"===a.orientation;return E.useEffect(()=>(d?o(!0):n(!0),()=>{d?o(!1):n(!1)}),[d,o,n]),"hover"===i.type?e.jsx(fe,{...r,ref:s,forceMount:t}):"scroll"===i.type?e.jsx(je,{...r,ref:s,forceMount:t}):"auto"===i.type?e.jsx(ve,{...r,ref:s,forceMount:t}):"always"===i.type?e.jsx(be,{...r,ref:s}):null});ge.displayName=he;var fe=E.forwardRef((a,s)=>{const{forceMount:t,...r}=a,i=me(he,a.__scopeScrollArea),[o,n]=E.useState(!1);return E.useEffect(()=>{const e=i.scrollArea;let a=0;if(e){const s=()=>{window.clearTimeout(a),n(!0)},t=()=>{a=window.setTimeout(()=>n(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",t),()=>{window.clearTimeout(a),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",t)}}},[i.scrollArea,i.scrollHideDelay]),e.jsx(z,{present:t||o,children:e.jsx(ve,{"data-state":o?"visible":"hidden",...r,ref:s})})}),je=E.forwardRef((a,s)=>{const{forceMount:t,...r}=a,i=me(he,a.__scopeScrollArea),o="horizontal"===a.orientation,n=Ie(()=>l("SCROLL_END"),100),[d,l]=(c="hidden",m={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},E.useReducer((e,a)=>m[e][a]??e,c));var c,m;return E.useEffect(()=>{if("idle"===d){const e=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,l]),E.useEffect(()=>{const e=i.viewport,a=o?"scrollLeft":"scrollTop";if(e){let s=e[a];const t=()=>{const t=e[a];s!==t&&(l("SCROLL"),n()),s=t};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,o,l,n]),e.jsx(z,{present:t||"hidden"!==d,children:e.jsx(be,{"data-state":"hidden"===d?"hidden":"visible",...r,ref:s,onPointerEnter:I(a.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:I(a.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),ve=E.forwardRef((a,s)=>{const t=me(he,a.__scopeScrollArea),{forceMount:r,...i}=a,[o,n]=E.useState(!1),d="horizontal"===a.orientation,l=Ie(()=>{if(t.viewport){const e=t.viewport.offsetWidth<t.viewport.scrollWidth,a=t.viewport.offsetHeight<t.viewport.scrollHeight;n(d?e:a)}},10);return Be(t.viewport,l),Be(t.content,l),e.jsx(z,{present:r||o,children:e.jsx(be,{"data-state":o?"visible":"hidden",...i,ref:s})})}),be=E.forwardRef((a,s)=>{const{orientation:t="vertical",...r}=a,i=me(he,a.__scopeScrollArea),o=E.useRef(null),n=E.useRef(0),[d,l]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=De(d.viewport,d.content),m={...r,sizes:d,onSizesChange:l,hasThumb:Boolean(c>0&&c<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>n.current=0,onThumbPointerDown:e=>n.current=e};function u(e,a){return function(e,a,s,t="ltr"){const r=Re(s),i=r/2,o=a||i,n=r-o,d=s.scrollbar.paddingStart+o,l=s.scrollbar.size-s.scrollbar.paddingEnd-n,c=s.content-s.viewport,m="ltr"===t?[0,c]:[-1*c,0];return Fe([d,l],m)(e)}(e,n.current,d,a)}return"horizontal"===t?e.jsx(Ne,{...m,ref:s,onThumbPositionChange:()=>{if(i.viewport&&o.current){const e=Te(i.viewport.scrollLeft,d,i.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=u(e,i.dir))}}):"vertical"===t?e.jsx(we,{...m,ref:s,onThumbPositionChange:()=>{if(i.viewport&&o.current){const e=Te(i.viewport.scrollTop,d);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=u(e))}}):null}),Ne=E.forwardRef((a,s)=>{const{sizes:t,onSizesChange:r,...i}=a,o=me(he,a.__scopeScrollArea),[n,d]=E.useState(),l=E.useRef(null),c=T(s,l,o.onScrollbarXChange);return E.useEffect(()=>{l.current&&d(getComputedStyle(l.current))},[l]),e.jsx(qe,{"data-orientation":"horizontal",...i,ref:c,sizes:t,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Re(t)+"px",...a.style},onThumbPointerDown:e=>a.onThumbPointerDown(e.x),onDragScroll:e=>a.onDragScroll(e.x),onWheelScroll:(e,s)=>{if(o.viewport){const t=o.viewport.scrollLeft+e.deltaX;a.onWheelScroll(t),Oe(t,s)&&e.preventDefault()}},onResize:()=>{l.current&&o.viewport&&n&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Ae(n.paddingLeft),paddingEnd:Ae(n.paddingRight)}})}})}),we=E.forwardRef((a,s)=>{const{sizes:t,onSizesChange:r,...i}=a,o=me(he,a.__scopeScrollArea),[n,d]=E.useState(),l=E.useRef(null),c=T(s,l,o.onScrollbarYChange);return E.useEffect(()=>{l.current&&d(getComputedStyle(l.current))},[l]),e.jsx(qe,{"data-orientation":"vertical",...i,ref:c,sizes:t,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Re(t)+"px",...a.style},onThumbPointerDown:e=>a.onThumbPointerDown(e.y),onDragScroll:e=>a.onDragScroll(e.y),onWheelScroll:(e,s)=>{if(o.viewport){const t=o.viewport.scrollTop+e.deltaY;a.onWheelScroll(t),Oe(t,s)&&e.preventDefault()}},onResize:()=>{l.current&&o.viewport&&n&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Ae(n.paddingTop),paddingEnd:Ae(n.paddingBottom)}})}})}),[ye,Se]=de(he),qe=E.forwardRef((a,s)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:n,onThumbPointerDown:d,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:m,onResize:u,...x}=a,p=me(he,t),[h,g]=E.useState(null),f=T(s,e=>g(e)),j=E.useRef(null),v=E.useRef(""),b=p.viewport,N=r.content-r.viewport,w=B(m),y=B(l),S=Ie(u,10);function q(e){if(j.current){const a=e.clientX-j.current.left,s=e.clientY-j.current.top;c({x:a,y:s})}}return E.useEffect(()=>{const e=e=>{const a=e.target,s=h?.contains(a);s&&w(e,N)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[b,h,N,w]),E.useEffect(y,[r,y]),Be(h,S),Be(p.content,S),e.jsx(ye,{scope:t,scrollbar:h,hasThumb:i,onThumbChange:B(o),onThumbPointerUp:B(n),onThumbPositionChange:y,onThumbPointerDown:B(d),children:e.jsx(O.div,{...x,ref:f,style:{position:"absolute",...x.style},onPointerDown:I(a.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),j.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),q(e)}}),onPointerMove:I(a.onPointerMove,q),onPointerUp:I(a.onPointerUp,e=>{const a=e.target;a.hasPointerCapture(e.pointerId)&&a.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),j.current=null})})})}),Ce="ScrollAreaThumb",Me=E.forwardRef((a,s)=>{const{forceMount:t,...r}=a,i=Se(Ce,a.__scopeScrollArea);return e.jsx(z,{present:t||i.hasThumb,children:e.jsx(ke,{ref:s,...r})})}),ke=E.forwardRef((a,s)=>{const{__scopeScrollArea:t,style:r,...i}=a,o=me(Ce,t),n=Se(Ce,t),{onThumbPositionChange:d}=n,l=T(s,e=>n.onThumbChange(e)),c=E.useRef(void 0),m=Ie(()=>{c.current&&(c.current(),c.current=void 0)},100);return E.useEffect(()=>{const e=o.viewport;if(e){const a=()=>{if(m(),!c.current){const a=ze(e,d);c.current=a,d()}};return d(),e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[o.viewport,m,d]),e.jsx(O.div,{"data-state":n.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:I(a.onPointerDownCapture,e=>{const a=e.target.getBoundingClientRect(),s=e.clientX-a.left,t=e.clientY-a.top;n.onThumbPointerDown({x:s,y:t})}),onPointerUp:I(a.onPointerUp,n.onThumbPointerUp)})});Me.displayName=Ce;var Pe="ScrollAreaCorner",Ee=E.forwardRef((a,s)=>{const t=me(Pe,a.__scopeScrollArea),r=Boolean(t.scrollbarX&&t.scrollbarY);return"scroll"!==t.type&&r?e.jsx(_e,{...a,ref:s}):null});Ee.displayName=Pe;var _e=E.forwardRef((a,s)=>{const{__scopeScrollArea:t,...r}=a,i=me(Pe,t),[o,n]=E.useState(0),[d,l]=E.useState(0),c=Boolean(o&&d);return Be(i.scrollbarX,()=>{const e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),l(e)}),Be(i.scrollbarY,()=>{const e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),n(e)}),c?e.jsx(O.div,{...r,ref:s,style:{width:o,height:d,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...a.style}}):null});function Ae(e){return e?parseInt(e,10):0}function De(e,a){const s=e/a;return isNaN(s)?0:s}function Re(e){const a=De(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,t=(e.scrollbar.size-s)*a;return Math.max(t,18)}function Te(e,a,s="ltr"){const t=Re(a),r=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,i=a.scrollbar.size-r,o=a.content-a.viewport,n=i-t,d=L(e,"ltr"===s?[0,o]:[-1*o,0]);return Fe([0,o],[0,n])(d)}function Fe(e,a){return s=>{if(e[0]===e[1]||a[0]===a[1])return a[0];const t=(a[1]-a[0])/(e[1]-e[0]);return a[0]+t*(s-e[0])}}function Oe(e,a){return e>0&&e<a}var ze=(e,a=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},t=0;return function r(){const i={left:e.scrollLeft,top:e.scrollTop},o=s.left!==i.left,n=s.top!==i.top;(o||n)&&a(),s=i,t=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(t)};function Ie(e,a){const s=B(e),t=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(t.current),[]),E.useCallback(()=>{window.clearTimeout(t.current),t.current=window.setTimeout(s,a)},[s,a])}function Be(e,a){const s=B(a);U(()=>{let a=0;if(e){const t=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(s)});return t.observe(e),()=>{window.cancelAnimationFrame(a),t.unobserve(e)}}},[e,s])}var Ue=ue,Le=pe,He=Ee;const Xe=E.forwardRef(({className:a,children:s,...t},r)=>e.jsxs(Ue,{ref:r,className:H("relative overflow-hidden",a),...t,children:[e.jsx(Le,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Ge,{}),e.jsx(He,{})]}));Xe.displayName=Ue.displayName;const Ge=E.forwardRef(({className:a,orientation:s="vertical",...t},r)=>e.jsx(ge,{ref:r,orientation:s,className:H("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...t,children:e.jsx(Me,{className:"relative flex-1 rounded-full bg-border"})}));function Qe({open:e,onClose:a,price:s}){return null}Ge.displayName=ge.displayName;const $e=({ebookId:o,hasAccess:n=!1,ebookPrice:d=0,ebookTitle:l=""})=>{const[c,m]=E.useState([]),[u,x]=E.useState(null),[p,h]=E.useState([]),[g,f]=E.useState(null),[j,v]=E.useState(!0),[b,N]=E.useState(!1),w=_();E.useEffect(()=>{y()},[o]),E.useEffect(()=>{u&&S(u.id)},[u]);const y=async()=>{try{const{data:e,error:a}=await X.from("chapters").select("*").eq("ebook_id",o).order("ord");if(a)throw a;m(e||[]),e&&e.length>0&&x(e[0])}catch(e){}finally{v(!1)}},S=async e=>{try{const{data:a,error:s}=await X.from("lessons").select("*").eq("chapter_id",e).order("ord").limit(n?100:1);if(s&&"PGRST116"!==s.code)throw s;h(a||[]),a&&a.length>0&&f(a[0])}catch(a){}};return j?e.jsx("div",{className:"text-center py-8",children:"Carregando conteúdo..."}):0===c.length?e.jsxs("div",{className:"card-premium text-center",children:[e.jsx(a,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Conteúdo em breve. Estamos preparando material exclusivo para você!"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"card-premium",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(a,{className:"h-5 w-5"}),"Capítulos"]}),e.jsx(Xe,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-2",children:c.map(a=>e.jsx("button",{onClick:()=>x(a),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+(u?.id===a.id?"bg-primary/20 text-primary":"hover:bg-muted"),children:e.jsx("div",{className:"text-sm font-medium",children:a.title})},a.id))})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"card-premium",children:g?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:g.title}),!n&&e.jsx("div",{className:"mb-4 p-4 bg-gold/10 border border-gold/30 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{className:"h-5 w-5 text-gold"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Preview Gratuito"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Esta é uma prévia. Desbloqueie o conteúdo completo para acessar todas as lições, vídeos e exercícios."})]})]})}),e.jsx(Xe,{className:"h-[500px] mb-6",children:e.jsxs("div",{className:"prose prose-invert max-w-none",children:[e.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:n?g.content||"Conteúdo em desenvolvimento...":g.content?.substring(0,500)+"..."||"Conteúdo em desenvolvimento..."}),!n&&e.jsxs("div",{className:"mt-6 p-6 bg-background/50 border border-primary/30 rounded-xl text-center",children:[e.jsx(s,{className:"h-12 w-12 text-primary mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Conteúdo Bloqueado"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Desbloqueie para continuar lendo e acessar todo o material de estudo"}),e.jsx(G,{className:"btn-premium",onClick:()=>N(!0),children:"Desbloquear Agora"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[e.jsxs(G,{onClick:n?()=>{if(!g)return;const e=p.findIndex(e=>e.id===g.id);e>0&&f(p[e-1])}:()=>N(!0),variant:"outline",disabled:n&&0===p.findIndex(e=>e.id===g.id),children:[e.jsx(t,{className:"h-4 w-4 mr-2"}),"Anterior"]}),e.jsxs(G,{onClick:n?()=>{g&&w(`/quiz/${g.id}`)}:()=>N(!0),className:"btn-premium",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Praticar"]}),e.jsxs(G,{onClick:n?()=>{if(!g)return;const e=p.findIndex(e=>e.id===g.id);e<p.length-1&&f(p[e+1])}:()=>N(!0),variant:"outline",disabled:n&&p.findIndex(e=>e.id===g.id)===p.length-1,children:["Próximo",e.jsx(i,{className:"h-4 w-4 ml-2"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Selecione um capítulo para começar"})})}),e.jsx(Qe,{open:b,onClose:()=>N(!1),price:100*d,productId:`prod_tab_${o}`,tabName:l,ebookId:o})]})},Ve=({isOpen:e,onClose:a,tipo:s,limiteUsado:t,limiteMaximo:r})=>null,We=[{id:"mat1",pergunta:"Qual é a fórmula da área do triângulo?",resposta:"A = (base × altura) / 2",materia:"Matemática",dificuldade:"Fácil"},{id:"mat2",pergunta:"O que é uma função do primeiro grau?",resposta:"f(x) = ax + b, onde a ≠ 0",materia:"Matemática",dificuldade:"Fácil"},{id:"mat3",pergunta:"Como calcular a distância entre dois pontos?",resposta:"d = √[(x₂-x₁)² + (y₂-y₁)²]",materia:"Matemática",dificuldade:"Médio"},{id:"mat4",pergunta:"Qual é a fórmula do teorema de Pitágoras?",resposta:"a² + b² = c²",materia:"Matemática",dificuldade:"Fácil"},{id:"mat5",pergunta:"O que é uma progressão aritmética?",resposta:"Sequência onde cada termo é o anterior + uma constante (razão)",materia:"Matemática",dificuldade:"Médio"},{id:"mat6",pergunta:"Como calcular a probabilidade de um evento?",resposta:"P(A) = casos favoráveis / casos possíveis",materia:"Matemática",dificuldade:"Fácil"},{id:"mat7",pergunta:"Qual é a fórmula da circunferência?",resposta:"C = 2πr",materia:"Matemática",dificuldade:"Fácil"},{id:"mat8",pergunta:"O que é uma função quadrática?",resposta:"f(x) = ax² + bx + c, onde a ≠ 0",materia:"Matemática",dificuldade:"Médio"},{id:"mat9",pergunta:"Como calcular a área do círculo?",resposta:"A = πr²",materia:"Matemática",dificuldade:"Fácil"},{id:"mat10",pergunta:"O que é logaritmo?",resposta:"Operação inversa da exponenciação: logₐ(b) = c significa a^c = b",materia:"Matemática",dificuldade:"Difícil"},{id:"mat11",pergunta:"Como calcular o volume do cilindro?",resposta:"V = πr²h",materia:"Matemática",dificuldade:"Médio"},{id:"mat12",pergunta:"O que é uma matriz?",resposta:"Tabela retangular de números organizados em linhas e colunas",materia:"Matemática",dificuldade:"Médio"},{id:"mat13",pergunta:"Como calcular a média aritmética?",resposta:"Soma de todos os valores ÷ quantidade de valores",materia:"Matemática",dificuldade:"Fácil"},{id:"mat14",pergunta:"O que é uma função exponencial?",resposta:"f(x) = aˣ, onde a > 0 e a ≠ 1",materia:"Matemática",dificuldade:"Médio"},{id:"mat15",pergunta:"Como calcular a área do trapézio?",resposta:"A = (base maior + base menor) × altura / 2",materia:"Matemática",dificuldade:"Fácil"},{id:"mat16",pergunta:"O que é uma inequação?",resposta:"Desigualdade com uma ou mais variáveis",materia:"Matemática",dificuldade:"Médio"},{id:"mat17",pergunta:"Como calcular a hipotenusa?",resposta:"c = √(a² + b²)",materia:"Matemática",dificuldade:"Fácil"},{id:"mat18",pergunta:"O que é uma função trigonométrica?",resposta:"Função que relaciona ângulos com razões trigonométricas",materia:"Matemática",dificuldade:"Difícil"},{id:"mat19",pergunta:"Como calcular a área do losango?",resposta:"A = (diagonal maior × diagonal menor) / 2",materia:"Matemática",dificuldade:"Fácil"},{id:"mat20",pergunta:"O que é uma derivada?",resposta:"Taxa de variação instantânea de uma função",materia:"Matemática",dificuldade:"Difícil"},{id:"port1",pergunta:"O que é um substantivo?",resposta:"Palavra que nomeia seres, objetos, lugares, sentimentos",materia:"Português",dificuldade:"Fácil"},{id:"port2",pergunta:"O que é um adjetivo?",resposta:"Palavra que qualifica ou caracteriza o substantivo",materia:"Português",dificuldade:"Fácil"},{id:"port3",pergunta:"O que é um verbo?",resposta:"Palavra que indica ação, estado ou fenômeno",materia:"Português",dificuldade:"Fácil"},{id:"port4",pergunta:"O que é uma preposição?",resposta:"Palavra invariável que liga termos da oração",materia:"Português",dificuldade:"Médio"},{id:"port5",pergunta:"O que é uma conjunção?",resposta:"Palavra que liga orações ou termos da mesma função",materia:"Português",dificuldade:"Médio"},{id:"port6",pergunta:"O que é sujeito?",resposta:"Termo da oração sobre o qual se fala",materia:"Português",dificuldade:"Fácil"},{id:"port7",pergunta:"O que é predicado?",resposta:"Parte da oração que informa algo sobre o sujeito",materia:"Português",dificuldade:"Fácil"},{id:"port8",pergunta:"O que é complemento verbal?",resposta:"Termo que completa o sentido do verbo transitivo",materia:"Português",dificuldade:"Médio"},{id:"port9",pergunta:"O que é adjunto adnominal?",resposta:"Termo que modifica o substantivo",materia:"Português",dificuldade:"Médio"},{id:"port10",pergunta:"O que é adjunto adverbial?",resposta:"Termo que modifica o verbo, adjetivo ou advérbio",materia:"Português",dificuldade:"Médio"},{id:"port11",pergunta:"O que é aposto?",resposta:"Termo que explica ou especifica outro termo",materia:"Português",dificuldade:"Médio"},{id:"port12",pergunta:"O que é vocativo?",resposta:"Termo usado para chamar ou invocar alguém",materia:"Português",dificuldade:"Fácil"},{id:"port13",pergunta:"O que é período composto?",resposta:"Período com mais de uma oração",materia:"Português",dificuldade:"Médio"},{id:"port14",pergunta:"O que é oração coordenada?",resposta:"Oração independente sintaticamente",materia:"Português",dificuldade:"Médio"},{id:"port15",pergunta:"O que é oração subordinada?",resposta:"Oração que depende sintaticamente de outra",materia:"Português",dificuldade:"Difícil"},{id:"port16",pergunta:"O que é metáfora?",resposta:"Figura de linguagem que estabelece comparação implícita",materia:"Português",dificuldade:"Médio"},{id:"port17",pergunta:"O que é metonímia?",resposta:"Figura que substitui uma palavra por outra com relação próxima",materia:"Português",dificuldade:"Difícil"},{id:"port18",pergunta:"O que é hipérbole?",resposta:"Figura de linguagem que exagera a expressão",materia:"Português",dificuldade:"Médio"},{id:"port19",pergunta:"O que é eufemismo?",resposta:"Figura que atenua uma expressão desagradável",materia:"Português",dificuldade:"Médio"},{id:"port20",pergunta:"O que é ironia?",resposta:"Figura que expressa o contrário do que se pensa",materia:"Português",dificuldade:"Médio"},{id:"bio1",pergunta:"O que é fotossíntese?",resposta:"Processo pelo qual plantas produzem glicose usando luz solar",materia:"Biologia",dificuldade:"Fácil"},{id:"bio2",pergunta:"O que é respiração celular?",resposta:"Processo de quebra da glicose para produção de ATP",materia:"Biologia",dificuldade:"Médio"},{id:"bio3",pergunta:"O que é DNA?",resposta:"Ácido desoxirribonucleico - material genético",materia:"Biologia",dificuldade:"Fácil"},{id:"bio4",pergunta:"O que é RNA?",resposta:"Ácido ribonucleico - participa da síntese proteica",materia:"Biologia",dificuldade:"Médio"},{id:"bio5",pergunta:"O que é mitose?",resposta:"Divisão celular que produz células idênticas",materia:"Biologia",dificuldade:"Médio"},{id:"bio6",pergunta:"O que é meiose?",resposta:"Divisão celular que produz gametas",materia:"Biologia",dificuldade:"Médio"},{id:"bio7",pergunta:"O que é ecossistema?",resposta:"Conjunto formado por comunidade + ambiente",materia:"Biologia",dificuldade:"Fácil"},{id:"bio8",pergunta:"O que é cadeia alimentar?",resposta:"Sequência de organismos onde um serve de alimento para outro",materia:"Biologia",dificuldade:"Fácil"},{id:"bio9",pergunta:"O que é biodiversidade?",resposta:"Variedade de vida na Terra",materia:"Biologia",dificuldade:"Fácil"},{id:"bio10",pergunta:"O que é seleção natural?",resposta:"Mecanismo da evolução que favorece características vantajosas",materia:"Biologia",dificuldade:"Médio"},{id:"bio11",pergunta:"O que é mutação?",resposta:"Alteração no material genético",materia:"Biologia",dificuldade:"Médio"},{id:"bio12",pergunta:"O que é adaptação?",resposta:"Característica que melhora a sobrevivência do organismo",materia:"Biologia",dificuldade:"Fácil"},{id:"bio13",pergunta:"O que é homeostase?",resposta:"Manutenção do equilíbrio interno do organismo",materia:"Biologia",dificuldade:"Médio"},{id:"bio14",pergunta:"O que é metabolismo?",resposta:"Conjunto de reações químicas do organismo",materia:"Biologia",dificuldade:"Médio"},{id:"bio15",pergunta:"O que é tecido?",resposta:"Conjunto de células com função específica",materia:"Biologia",dificuldade:"Fácil"},{id:"bio16",pergunta:"O que é órgão?",resposta:"Conjunto de tecidos com função específica",materia:"Biologia",dificuldade:"Fácil"},{id:"bio17",pergunta:"O que é sistema?",resposta:"Conjunto de órgãos que trabalham juntos",materia:"Biologia",dificuldade:"Fácil"},{id:"bio18",pergunta:"O que é organismo?",resposta:"Ser vivo completo",materia:"Biologia",dificuldade:"Fácil"},{id:"bio19",pergunta:"O que é população?",resposta:"Grupo de indivíduos da mesma espécie em uma área",materia:"Biologia",dificuldade:"Fácil"},{id:"bio20",pergunta:"O que é comunidade?",resposta:"Conjunto de populações que vivem na mesma área",materia:"Biologia",dificuldade:"Fácil"}],Ye=()=>{const[a,s]=E.useState(()=>{const e=localStorage.getItem("flashcardsUsados");return e?parseInt(e):0}),[r,l]=E.useState(()=>{const e=localStorage.getItem("acertosFlashcards");return e?parseInt(e):0}),[c,m]=E.useState(()=>{const e=localStorage.getItem("errosFlashcards");return e?parseInt(e):0}),[u,x]=E.useState("Matemática"),[p,h]=E.useState(0),[g,f]=E.useState(!1),[j,v]=E.useState(null),[b,N]=E.useState(!1);Q();const w=1/0,y=We.filter(e=>e.materia===u);E.useEffect(()=>{localStorage.setItem("flashcardsUsados",a.toString()),localStorage.setItem("acertosFlashcards",r.toString()),localStorage.setItem("errosFlashcards",c.toString())},[a,r,c]);const S=()=>{s(e=>e+1),h(e=>(e+1)%y.length),f(!1),v(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{className:"border-primary/20",children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Flashcards Gratuitos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uso ilimitado hoje"})]})]}),e.jsxs(W,{variant:"outline",className:"text-green-600",children:[r," acertos"]})]}),!1,!1]})}),e.jsx("div",{className:"flex gap-2",children:["Matemática","Português","Biologia"].map(a=>e.jsx(G,{variant:u===a?"default":"outline",size:"sm",onClick:()=>{x(a),h(0),f(!1),v(null)},children:a},a))}),y.length>0&&e.jsx($,{className:"min-h-[300px] border-primary/30",children:e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(W,{variant:"Fácil"===y[p]?.dificuldade?"default":"Médio"===y[p]?.dificuldade?"secondary":"destructive",children:y[p]?.dificuldade}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[p+1," de ",y.length]})]}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"min-h-[100px] flex items-center justify-center",children:e.jsx("h4",{className:"text-lg font-medium leading-relaxed",children:y[p]?.pergunta})}),g&&e.jsxs("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsx("p",{className:"text-primary font-medium",children:y[p]?.resposta}),null!==j&&e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2",children:[j?e.jsx(n,{className:"h-4 w-4 text-green-600"}):e.jsx(d,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm "+(j?"text-green-600":"text-red-600"),children:j?"Acertou!":"Errou"})]})]}),e.jsx("div",{className:"flex gap-3 justify-center",children:g?e.jsxs(e.Fragment,{children:[e.jsxs(G,{variant:"outline",onClick:()=>{v(!1),m(e=>e+1)},disabled:a>=w,children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),"Errei"]}),e.jsxs(G,{onClick:S,disabled:a>=w,children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),"Acertei"]})]}):e.jsx(G,{onClick:()=>{f(!0),v(!0),l(e=>e+1)},disabled:a>=w,children:"Revelar Resposta"})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{h(e=>0===e?y.length-1:e-1),f(!1),v(null)},children:e.jsx(t,{className:"h-4 w-4"})}),e.jsx(G,{variant:"ghost",size:"sm",onClick:S,disabled:a>=w,children:e.jsx(i,{className:"h-4 w-4"})})]})]})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Seu Progresso"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Acertos"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:c}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Erros"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[r+c>0?Math.round(r/(r+c)*100):0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Taxa Acerto"})]})]})]})}),e.jsx(Ve,{isOpen:!1,onClose:()=>N(!1),tipo:"flashcards",limiteUsado:a,limiteMaximo:w})]})},Je=[{id:"mat-algebra",nome:"Álgebra e Funções",materia:"Matemática",aberta:!1,revisados:0,total:8,topicos:[{id:"mat1",nome:"Funções do 1º grau",revisado:!1,importancia:"Alta"},{id:"mat2",nome:"Funções do 2º grau",revisado:!1,importancia:"Alta"},{id:"mat3",nome:"Função exponencial",revisado:!1,importancia:"Alta"},{id:"mat4",nome:"Função logarítmica",revisado:!1,importancia:"Média"},{id:"mat5",nome:"Progressões aritméticas",revisado:!1,importancia:"Média"},{id:"mat6",nome:"Progressões geométricas",revisado:!1,importancia:"Média"},{id:"mat7",nome:"Matrizes",revisado:!1,importancia:"Baixa"},{id:"mat8",nome:"Determinantes",revisado:!1,importancia:"Baixa"}]},{id:"mat-geometria",nome:"Geometria",materia:"Matemática",aberta:!1,revisados:0,total:7,topicos:[{id:"mat9",nome:"Geometria plana",revisado:!1,importancia:"Alta"},{id:"mat10",nome:"Geometria espacial",revisado:!1,importancia:"Alta"},{id:"mat11",nome:"Trigonometria",revisado:!1,importancia:"Média"},{id:"mat12",nome:"Geometria analítica",revisado:!1,importancia:"Média"},{id:"mat13",nome:"Áreas e perímetros",revisado:!1,importancia:"Alta"},{id:"mat14",nome:"Volumes",revisado:!1,importancia:"Alta"},{id:"mat15",nome:"Semelhança de triângulos",revisado:!1,importancia:"Média"}]},{id:"port-interpretacao",nome:"Interpretação de Texto",materia:"Português",aberta:!1,revisados:0,total:6,topicos:[{id:"port1",nome:"Leitura e compreensão",revisado:!1,importancia:"Alta"},{id:"port2",nome:"Inferência e dedução",revisado:!1,importancia:"Alta"},{id:"port3",nome:"Coesão e coerência",revisado:!1,importancia:"Alta"},{id:"port4",nome:"Tipos de texto",revisado:!1,importancia:"Média"},{id:"port5",nome:"Funções da linguagem",revisado:!1,importancia:"Média"},{id:"port6",nome:"Figuras de linguagem",revisado:!1,importancia:"Média"}]},{id:"port-gramatica",nome:"Gramática",materia:"Português",aberta:!1,revisados:0,total:8,topicos:[{id:"port7",nome:"Classes de palavras",revisado:!1,importancia:"Alta"},{id:"port8",nome:"Concordância verbal",revisado:!1,importancia:"Alta"},{id:"port9",nome:"Concordância nominal",revisado:!1,importancia:"Alta"},{id:"port10",nome:"Regência verbal",revisado:!1,importancia:"Alta"},{id:"port11",nome:"Regência nominal",revisado:!1,importancia:"Média"},{id:"port12",nome:"Crase",revisado:!1,importancia:"Média"},{id:"port13",nome:"Pontuação",revisado:!1,importancia:"Média"},{id:"port14",nome:"Ortografia",revisado:!1,importancia:"Baixa"}]},{id:"bio-celula",nome:"Biologia Celular",materia:"Biologia",aberta:!1,revisados:0,total:5,topicos:[{id:"bio1",nome:"Estrutura celular",revisado:!1,importancia:"Alta"},{id:"bio2",nome:"Metabolismo celular",revisado:!1,importancia:"Alta"},{id:"bio3",nome:"Respiração celular",revisado:!1,importancia:"Alta"},{id:"bio4",nome:"Fotossíntese",revisado:!1,importancia:"Alta"},{id:"bio5",nome:"Divisão celular",revisado:!1,importancia:"Média"}]},{id:"bio-ecologia",nome:"Ecologia",materia:"Biologia",aberta:!1,revisados:0,total:6,topicos:[{id:"bio6",nome:"Ecossistemas",revisado:!1,importancia:"Alta"},{id:"bio7",nome:"Cadeias alimentares",revisado:!1,importancia:"Alta"},{id:"bio8",nome:"Ciclos biogeoquímicos",revisado:!1,importancia:"Média"},{id:"bio9",nome:"Biodiversidade",revisado:!1,importancia:"Alta"},{id:"bio10",nome:"Conservação ambiental",revisado:!1,importancia:"Média"},{id:"bio11",nome:"Impactos ambientais",revisado:!1,importancia:"Média"}]}],Ze=()=>{const[a,t]=E.useState(()=>{const e=localStorage.getItem("checklistSessoes");return e?JSON.parse(e):Je}),[o,n]=E.useState(()=>{const e=localStorage.getItem("topicosRevisados");return e?parseInt(e):0});Q(),E.useEffect(()=>{localStorage.setItem("checklistSessoes",JSON.stringify(a)),localStorage.setItem("topicosRevisados",o.toString())},[a,o]);const d=a.reduce((e,a)=>e+a.total,0),m=o/d*100,u=e=>{switch(e){case"Alta":return"text-red-600 bg-red-50 border-red-200";case"Média":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"Baixa":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"border-primary/20",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5 text-primary"}),"Checklist de Revisão Essencial"]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progresso Geral"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[o," de ",d," tópicos"]})]}),e.jsx(Z,{value:m,className:"h-3"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(m),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completo"})]})]})})]}),a.map(s=>e.jsxs($,{className:"border-border",children:[e.jsx(Y,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{return e=s.id,void t(a=>a.map(a=>a.id===e?{...a,aberta:!a.aberta}:a));var e},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.aberta?e.jsx(c,{className:"h-4 w-4 text-primary"}):e.jsx(i,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(J,{className:"text-lg",children:s.nome}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.materia})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary",children:[s.revisados,"/",s.total]}),e.jsx(Z,{value:s.revisados/s.total*100,className:"w-20 h-2 mt-1"})]})]})}),s.aberta&&e.jsxs(V,{className:"pt-0",children:[e.jsx("div",{className:"space-y-3",children:s.topicos.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 "+(r.revisado?"bg-green-500 hover:bg-green-600 text-white":"border-2 border-gray-300 hover:border-primary"),onClick:()=>((e,s)=>{t(a=>a.map(a=>{if(a.id===e){const e=a.topicos.map(e=>e.id===s?{...e,revisado:!e.revisado}:e),t=e.filter(e=>e.revisado).length;return{...a,topicos:e,revisados:t}}return a}));const r=a.reduce((a,t)=>{if(t.id===e){const e=t.topicos.find(e=>e.id===s);return a+(e?.revisado?1:-1)}return a+t.revisados},0);n(r)})(s.id,r.id),children:r.revisado&&e.jsx(l,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-medium "+(r.revisado?"line-through text-muted-foreground":""),children:r.nome})]}),e.jsx(W,{variant:"outline",className:`text-xs ${u(r.importancia)}`,children:r.importancia})]},r.id))}),s.revisados===s.total&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Sessão completa! 🎉"})]})})]})]},s.id)),e.jsx($,{className:"border-gold/20 bg-gold/5",children:e.jsxs(V,{className:"p-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4 text-gold"}),"Dicas Avançadas (Premium)"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Com o upgrade você terá acesso a:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Cronograma personalizado baseado no seu progresso"}),e.jsx("li",{children:"• Simulados específicos por tópico"}),e.jsx("li",{children:"• Análise de pontos fracos"}),e.jsx("li",{children:"• Lembretes inteligentes"})]})]})})]})};var Ke="Switch",[ea,aa]=R(Ke),[sa,ta]=ea(Ke),ra=E.forwardRef((a,s)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:o,required:n,disabled:d,value:l="on",onCheckedChange:c,form:m,...u}=a,[x,p]=E.useState(null),h=T(s,e=>p(e)),g=E.useRef(!1),f=!x||(m||!!x.closest("form")),[j,v]=K({prop:i,defaultProp:o??!1,onChange:c,caller:Ke});return e.jsxs(sa,{scope:t,checked:j,disabled:d,children:[e.jsx(O.button,{type:"button",role:"switch","aria-checked":j,"aria-required":n,"data-state":da(j),"data-disabled":d?"":void 0,disabled:d,value:l,...u,ref:h,onClick:I(a.onClick,e=>{v(e=>!e),f&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),f&&e.jsx(na,{control:x,bubbles:!g.current,name:r,value:l,checked:j,required:n,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});ra.displayName=Ke;var ia="SwitchThumb",oa=E.forwardRef((a,s)=>{const{__scopeSwitch:t,...r}=a,i=ta(ia,t);return e.jsx(O.span,{"data-state":da(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});oa.displayName=ia;var na=E.forwardRef(({__scopeSwitch:a,control:s,checked:t,bubbles:r=!0,...i},o)=>{const n=E.useRef(null),d=T(n,o),l=ee(t),c=ae(s);return E.useEffect(()=>{const e=n.current;if(!e)return;const a=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(a,"checked").set;if(l!==t&&s){const a=new Event("click",{bubbles:r});s.call(e,t),e.dispatchEvent(a)}},[l,t,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:d,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function da(e){return e?"checked":"unchecked"}na.displayName="SwitchBubbleInput";var la=ra,ca=oa;const ma=E.forwardRef(({className:a,...s},t)=>e.jsx(la,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",a),...s,ref:t,children:e.jsx(ca,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));function ua(e,a){const s=function(){if("undefined"==typeof window||!("Notification"in window))return{ok:!1,reason:"unsupported"};if(!window.isSecureContext&&"localhost"!==location.hostname)return{ok:!1,reason:"insecure_context"};const e=Notification.permission;return"denied"===e?{ok:!1,reason:"denied"}:"default"===e?{ok:!1,reason:"default"}:{ok:!0}}();return s.ok?"undefined"!=typeof navigator&&"serviceWorker"in navigator?(navigator.serviceWorker.getRegistration().then(async s=>{try{if(s)await s.showNotification(e,a);else{const s=await navigator.serviceWorker.register("/sw.js");await s.showNotification(e,a)}}catch(t){}}).catch(()=>{}),{ok:!0}):{ok:!1,reason:"unsupported"}:s}ma.displayName=la.displayName;const xa=[{id:"flashcards-manha",titulo:"Flashcards da Manhã",descricao:"Hora de revisar seus flashcards! Comece o dia com 5 cards.",hora:"08:00",ativa:!0,tipo:"flashcards",icone:e.jsx(o,{className:"h-4 w-4"})},{id:"questao-dia",titulo:"Questão do Dia",descricao:"Resolva sua questão diária e mantenha sua sequência!",hora:"14:00",ativa:!0,tipo:"questao",icone:e.jsx(r,{className:"h-4 w-4"})},{id:"checklist-noite",titulo:"Checklist da Noite",descricao:"Revise os tópicos estudados hoje no seu checklist.",hora:"20:00",ativa:!0,tipo:"checklist",icone:e.jsx(l,{className:"h-4 w-4"})},{id:"motivacional",titulo:"Dica Motivacional",descricao:"Mantenha o foco! Cada estudo te aproxima da aprovação.",hora:"18:00",ativa:!0,tipo:"motivacional",icone:e.jsx(m,{className:"h-4 w-4"})}],pa=()=>{const[a,s]=E.useState(()=>{const e=localStorage.getItem("notificacoesBasicas");return e?JSON.parse(e):xa}),[t,r]=E.useState("default"),{toast:i}=Q();E.useEffect(()=>{localStorage.setItem("notificacoesBasicas",JSON.stringify(a))},[a]),E.useEffect(()=>{"Notification"in window&&r(Notification.permission)},[]);const o=e=>{switch(e){case"flashcards":return"bg-blue-500";case"questao":return"bg-green-500";case"checklist":return"bg-purple-500";case"motivacional":return"bg-yellow-500";default:return"bg-gray-500"}},n=e=>{switch(e){case"flashcards":return"Flashcards";case"questao":return"Questão do Dia";case"checklist":return"Checklist";case"motivacional":return"Motivacional";default:return"Geral"}},d=a.filter(e=>e.ativa).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"border-primary/20",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-primary"}),"Configurações de Notificação"]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Permissão do Navegador"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"granted"===t?"Permitido":"denied"===t?"Negado":"Não solicitado"})]}),e.jsx(W,{variant:"granted"===t?"default":"denied"===t?"destructive":"secondary",children:"granted"===t?"Ativo":"denied"===t?"Bloqueado":"Pendente"})]}),"granted"!==t&&e.jsxs(G,{onClick:async()=>{const e=await async function(){if("undefined"==typeof window||!("Notification"in window))return"denied";try{return await Notification.requestPermission()}catch(e){return"denied"}}();if(r(e),"granted"===e){i({title:"Permissão concedida! 🔔",description:"Você receberá notificações de estudo."});const e=ua("ENEM 30x Boost",{body:"Notificações ativadas! Continue seus estudos.",icon:"/favicon.ico"});if(!e.ok){const a="insecure_context"===e.reason?"Contexto não seguro (http). Use https ou localhost.":"unsupported"===e.reason?"Navegador não suporta Notifications.":"Falha ao enviar notificação de teste.";i({title:"Aviso",description:a,variant:"destructive"})}}else i({title:"Permissão negada",description:"Ative nas configurações do navegador.",variant:"destructive"})},className:"w-full",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Ativar Notificações"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Notificações Ativas"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d," de ",a.length," ativadas"]})]}),e.jsxs(W,{variant:"outline",children:[d,"/",a.length]})]})]})})]}),e.jsx("div",{className:"space-y-4",children:a.map(a=>e.jsx($,{className:"border-border",children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${o(a.tipo)} text-white`,children:a.icone}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.titulo}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.descricao}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(u,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.hora," • ",n(a.tipo)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ma,{checked:a.ativa,onCheckedChange:()=>{return e=a.id,void s(a=>a.map(a=>a.id===e?{...a,ativa:!a.ativa}:a));var e}}),e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>(e=>{const a=ua(e.titulo,{body:e.descricao,icon:"/favicon.ico"});a.ok?i({title:"Notificação enviada!",description:`"${e.titulo}" foi enviada como teste.`}):"default"===a.reason?i({title:"Permissão necessária",description:"Ative as notificações primeiro para testar.",variant:"destructive"}):"insecure_context"===a.reason?i({title:"Contexto não seguro",description:"Use https ou localhost para testar notificações.",variant:"destructive"}):"unsupported"===a.reason?i({title:"Não suportado",description:"Seu navegador não suporta Notifications.",variant:"destructive"}):i({title:"Falha ao enviar",description:"Não foi possível enviar a notificação.",variant:"destructive"})})(a),disabled:"granted"!==t,children:e.jsx(m,{className:"h-4 w-4"})})]})]}),a.ativa&&e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Horário:"}),e.jsx("input",{type:"time",value:a.hora,onChange:e=>{return t=a.id,r=e.target.value,void s(e=>e.map(e=>e.id===t?{...e,hora:r}:e));var t,r},className:"px-2 py-1 border rounded text-sm"})]})]})},a.id))}),e.jsx($,{className:"border-gold/20 bg-gold/5",children:e.jsxs(V,{className:"p-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4 text-gold"}),"Dicas para Melhor Uso"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Mantenha o navegador aberto para receber notificações"}),e.jsx("li",{children:"• Configure horários que se adequem à sua rotina"}),e.jsx("li",{children:"• Use as notificações para criar hábitos de estudo"}),e.jsx("li",{children:"• Teste as notificações antes de confiar nelas"})]})]})}),e.jsx($,{className:"border-gold/30 bg-gradient-to-r from-gold/5 to-gold/10",children:e.jsxs(V,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gold",children:"🚀 Notificações Premium"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Com o upgrade você terá acesso a:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Notificações personalizadas baseadas no seu progresso"}),e.jsx("li",{children:"• Lembretes inteligentes de revisão"}),e.jsx("li",{children:"• Alertas de simulados e prazos"}),e.jsx("li",{children:"• Notificações push no celular"})]})]})})]})},ha=[{id:"welcome",title:"Bem-vindo ao ENEM 30x Boost! 🚀",subtitle:"Vamos personalizar sua experiência de estudo",icon:e.jsx(p,{className:"h-8 w-8 text-gold"})},{id:"personal",title:"Conta nos sobre você",subtitle:"Informações básicas para personalização",icon:e.jsx(h,{className:"h-6 w-6"})},{id:"academic",title:"Seus objetivos acadêmicos",subtitle:"Onde você quer chegar?",icon:e.jsx(g,{className:"h-6 w-6"})},{id:"preparation",title:"Seu nível atual",subtitle:"Como está sua preparação hoje?",icon:e.jsx(r,{className:"h-6 w-6"})},{id:"schedule",title:"Sua rotina de estudos",subtitle:"Quando e quanto você pode estudar?",icon:e.jsx(u,{className:"h-6 w-6"})},{id:"difficulties",title:"Suas principais dificuldades",subtitle:"O que mais te preocupa no ENEM?",icon:e.jsx(o,{className:"h-6 w-6"})},{id:"motivation",title:"Sua motivação",subtitle:"O que te move a estudar?",icon:e.jsx(f,{className:"h-6 w-6"})},{id:"complete",title:"Tudo pronto! 🎉",subtitle:"Seu cronograma personalizado está sendo criado",icon:e.jsx(n,{className:"h-8 w-8 text-green-500"})}],ga=["Medicina","Direito","Engenharia","Administração","Psicologia","Enfermagem","Fisioterapia","Odontologia","Veterinária","Arquitetura","Ciência da Computação","Jornalismo","Publicidade","Economia","Outro"],fa=["USP","UNICAMP","UFMG","UFRJ","UNB","UFRGS","UFSC","UFC","UFPE","UFBA","UFCG","UFRN","UFPA","UFAM","UFPR","Outra"],ja=["Matemática","Português","Redação","Biologia","Química","Física","História","Geografia","Filosofia","Sociologia"],va=["Realizar o sonho da família","Ter uma carreira estável","Fazer a diferença na sociedade","Ganhar bem financeiramente","Seguir minha paixão","Provar minha capacidade"],ba=({onComplete:a})=>{const[s,r]=E.useState(0),[o,n]=E.useState({fullName:"",desiredCourse:"",targetUniversity:"",preparationLevel:"zero",studyDaysAvailable:5,mainDifficulty:"",studyGoal:"",motivation:""}),[d,l]=E.useState(!1),{toast:c}=Q(),m=(s+1)/ha.length*100,u=(e,a)=>{n(s=>({...s,[e]:a}))},x=async()=>{l(!0);try{const{data:{user:e}}=await X.auth.getUser();if(!e)throw new Error("Usuário não encontrado");const{error:s}=await X.from("profiles").update({full_name:o.fullName,desired_course:o.desiredCourse,target_university:o.targetUniversity,preparation_level:o.preparationLevel,study_days_available:o.studyDaysAvailable,main_difficulty:o.mainDifficulty,onboarding_completed:!0}).eq("id",e.id);if(s)throw s;const{error:t}=await X.from("daily_usage").upsert({user_id:e.id,date:(new Date).toISOString().split("T")[0],questions_answered:0,study_hours:0,streak_days:0});if(t)throw t;c({title:"Onboarding concluído! 🎉",description:"Sua experiência foi personalizada com sucesso."}),a()}catch(e){c({title:"Erro ao salvar dados",description:e.message,variant:"destructive"})}finally{l(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs($,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ha[s].icon,e.jsxs("div",{children:[e.jsx(J,{children:ha[s].title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ha[s].subtitle})]})]}),e.jsxs(W,{variant:"outline",children:[s+1," de ",ha.length]})]}),e.jsx(Z,{value:m,className:"h-2"})]}),e.jsxs(V,{className:"space-y-6",children:[(()=>{switch(ha[s].id){case"welcome":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl",children:"🚀"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Bem-vindo ao futuro dos seus estudos!"}),e.jsx("p",{className:"text-muted-foreground",children:"Em apenas 30 dias, você estará pronto para conquistar sua vaga no ENEM. Vamos personalizar tudo para você!"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx(f,{className:"h-8 w-8 mx-auto mb-2 text-gold"}),e.jsx("div",{className:"text-2xl font-bold text-gold",children:"95%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Taxa de aprovação"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx(h,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:"10k+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Estudantes aprovados"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx(j,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-2xl font-bold text-green-500",children:"30"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Dias para aprovação"})]})]})]});case"personal":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Como você gostaria de ser chamado?"}),e.jsx("input",{type:"text",value:o.fullName,onChange:e=>u("fullName",e.target.value),placeholder:"Digite seu nome",className:"w-full p-3 border rounded-lg"})]})});case"academic":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qual curso você deseja?"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ga.map(a=>e.jsx(G,{variant:o.desiredCourse===a?"default":"outline",onClick:()=>u("desiredCourse",a),className:"h-auto p-3",children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Universidade dos seus sonhos?"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:fa.map(a=>e.jsx(G,{variant:o.targetUniversity===a?"default":"outline",onClick:()=>u("targetUniversity",a),className:"h-auto p-3",children:a},a))})]})]});case"preparation":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Como você avalia sua preparação atual?"}),e.jsx("div",{className:"space-y-3",children:[{value:"zero",label:"Zero - Estou começando do zero",desc:"Não tenho base sólida"},{value:"basico",label:"Básico - Tenho alguma base",desc:"Conheço alguns tópicos"},{value:"intermediario",label:"Intermediário - Estou bem preparado",desc:"Tenho boa base, preciso revisar"}].map(a=>e.jsxs("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors "+(o.preparationLevel===a.value?"border-primary bg-primary/10":"hover:bg-muted/50"),onClick:()=>u("preparationLevel",a.value),children:[e.jsx("div",{className:"font-medium",children:a.label}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.desc})]},a.value))})]})});case"schedule":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quantos dias por semana você pode estudar?"}),e.jsx("div",{className:"flex gap-2",children:[3,4,5,6,7].map(a=>e.jsxs(G,{variant:o.studyDaysAvailable===a?"default":"outline",onClick:()=>u("studyDaysAvailable",a),className:"flex-1",children:[a," dias"]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quantas horas por dia você pode dedicar aos estudos?"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4,5,6].map(a=>e.jsxs(G,{variant:"outline",className:"h-auto p-3",children:[a,"h por dia"]},a))})]})]});case"difficulties":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qual matéria você considera mais difícil?"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ja.map(a=>e.jsx(G,{variant:o.mainDifficulty===a?"default":"outline",onClick:()=>u("mainDifficulty",a),className:"h-auto p-3",children:a},a))})]})});case"motivation":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"O que mais te motiva a estudar?"}),e.jsx("div",{className:"space-y-3",children:va.map(a=>e.jsx("div",{className:"p-4 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>u("motivation",a),children:e.jsx("div",{className:"font-medium",children:a})},a))})]})});case"complete":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl",children:"🎉"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Perfeito, ",o.fullName,"!"]}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Com base nas suas respostas, criamos um cronograma personalizado para você conquistar sua vaga em ",o.desiredCourse," na ",o.targetUniversity,"."]})]}),e.jsx("div",{className:"grid gap-4",children:e.jsx($,{className:"border-primary/20 bg-primary/5",children:e.jsxs(V,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Seu plano personalizado inclui:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-left",children:[e.jsxs("li",{children:["✅ Cronograma de ",o.studyDaysAvailable," dias por semana"]}),e.jsxs("li",{children:["✅ Foco especial em ",o.mainDifficulty]}),e.jsxs("li",{children:["✅ Simulados adaptados ao seu nível ",o.preparationLevel]}),e.jsx("li",{children:"✅ Lembretes personalizados de estudo"}),e.jsx("li",{children:"✅ Acompanhamento de progresso detalhado"})]})]})})})]});default:return null}})(),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(G,{variant:"outline",onClick:()=>{s>0&&r(e=>e-1)},disabled:0===s,children:[e.jsx(t,{className:"h-4 w-4 mr-2"}),"Anterior"]}),e.jsxs(G,{onClick:()=>{s<ha.length-1?r(e=>e+1):x()},disabled:d,className:"min-w-[120px]",children:[d?"Salvando...":s===ha.length-1?"Finalizar":"Próximo",!d&&s<ha.length-1&&e.jsx(i,{className:"h-4 w-4 ml-2"})]})]})]})]})})},Na=[{id:"first_steps",name:"Primeiros Passos",description:"Complete seu primeiro dia de estudos",icon:e.jsx(r,{className:"h-5 w-5"}),rarity:"common",requirement:"1 dia de estudo",unlocked:!1,xpReward:50},{id:"streak_7",name:"Semana de Ferro",description:"Mantenha uma sequência de 7 dias",icon:e.jsx(w,{className:"h-5 w-5"}),rarity:"rare",requirement:"7 dias consecutivos",unlocked:!1,xpReward:200},{id:"streak_30",name:"Mestre da Disciplina",description:"30 dias de estudo consecutivo",icon:e.jsx(v,{className:"h-5 w-5"}),rarity:"legendary",requirement:"30 dias consecutivos",unlocked:!1,xpReward:1e3},{id:"flashcard_master",name:"Mestre dos Flashcards",description:"Acertou 100 flashcards",icon:e.jsx(o,{className:"h-5 w-5"}),rarity:"epic",requirement:"100 acertos em flashcards",unlocked:!1,xpReward:500},{id:"question_solver",name:"Resolvedor de Questões",description:"Resolveu 500 questões",icon:e.jsx(n,{className:"h-5 w-5"}),rarity:"epic",requirement:"500 questões respondidas",unlocked:!1,xpReward:500},{id:"accuracy_king",name:"Rei da Precisão",description:"Manteve 90% de acerto por 7 dias",icon:e.jsx(N,{className:"h-5 w-5"}),rarity:"rare",requirement:"90% acerto por 7 dias",unlocked:!1,xpReward:300},{id:"speed_demon",name:"Demônio da Velocidade",description:"Resolveu 20 questões em 15 minutos",icon:e.jsx(j,{className:"h-5 w-5"}),rarity:"rare",requirement:"20 questões em 15 min",unlocked:!1,xpReward:250},{id:"night_owl",name:"Coruja Noturna",description:"Estudou após 22h por 5 dias",icon:e.jsx(u,{className:"h-5 w-5"}),rarity:"common",requirement:"Estudo após 22h",unlocked:!1,xpReward:100},{id:"early_bird",name:"Madrugador",description:"Estudou antes das 6h por 5 dias",icon:e.jsx(p,{className:"h-5 w-5"}),rarity:"common",requirement:"Estudo antes das 6h",unlocked:!1,xpReward:100},{id:"perfectionist",name:"Perfeccionista",description:"Acertou 100% em um simulado",icon:e.jsx(f,{className:"h-5 w-5"}),rarity:"legendary",requirement:"100% em simulado",unlocked:!1,xpReward:750}],wa=[{id:"study_hours_10",name:"Maratonista",description:"Complete 10 horas de estudo",progress:0,maxProgress:10,reward:"100 XP + Badge especial",completed:!1},{id:"study_hours_50",name:"Veterano",description:"Complete 50 horas de estudo",progress:0,maxProgress:50,reward:"500 XP + Acesso premium por 1 semana",completed:!1},{id:"questions_100",name:"Centenário",description:"Responda 100 questões",progress:0,maxProgress:100,reward:"200 XP + Simulado exclusivo",completed:!1},{id:"questions_1000",name:"Milenar",description:"Responda 1000 questões",progress:0,maxProgress:1e3,reward:"1000 XP + Consultoria personalizada",completed:!1},{id:"perfect_week",name:"Semana Perfeita",description:"Complete todos os objetivos por 7 dias",progress:0,maxProgress:7,reward:"300 XP + Badge dourado",completed:!1}],ya=()=>{const[a,s]=E.useState({level:1,xp:0,xpToNext:100,streak:0,totalStudyHours:0,questionsAnswered:0,accuracy:0,rank:0,badges:Na,achievements:wa}),[t,i]=E.useState(null),{toast:o}=Q();E.useEffect(()=>{n()},[]);const n=async()=>{try{const{data:{user:e}}=await X.auth.getUser();if(!e)return;const{data:a}=await X.from("daily_usage").select("*").eq("user_id",e.id).order("date",{ascending:!1}).limit(30);if(a){const e=a.reduce((e,a)=>e+(a.study_hours||0),0),t=a.reduce((e,a)=>e+(a.questions_answered||0),0),r=d(a),i=10*e+2*t+5*r,o=Math.floor(i/100)+1,n=100-i%100;s(s=>({...s,level:o,xp:i,xpToNext:n,streak:r,totalStudyHours:e,questionsAnswered:t,accuracy:l(a)})),c({level:o,xp:i,streak:r,totalStudyHours:e,questionsAnswered:t})}}catch(e){}},d=e=>{if(!e.length)return 0;let a=0;const s=new Date;for(let t=0;t<e.length;t++){const r=new Date(e[t].date);if(!(Math.floor((s.getTime()-r.getTime())/864e5)===a&&e[t].study_hours>0))break;a++}return a},l=e=>30*Math.random()+70,c=e=>{const a=Na.map(a=>{let s=a.unlocked;switch(a.id){case"first_steps":s=e.totalStudyHours>0;break;case"streak_7":s=e.streak>=7;break;case"streak_30":s=e.streak>=30;break;case"flashcard_master":s=e.questionsAnswered>=100;break;case"question_solver":s=e.questionsAnswered>=500;break;case"accuracy_king":s=e.accuracy>=90;break;case"speed_demon":s=e.questionsAnswered>=20}return s&&!a.unlocked&&setTimeout(()=>{i(a),o({title:"🏆 Badge Desbloqueado!",description:`Você conquistou: ${a.name}`})},1e3),{...a,unlocked:s}});s(e=>({...e,badges:a}))},m=e=>{switch(e){case"common":return"text-gray-600 bg-gray-100 border-gray-300";case"rare":return"text-blue-600 bg-blue-100 border-blue-300";case"epic":return"text-purple-600 bg-purple-100 border-purple-300";case"legendary":return"text-gold bg-yellow-100 border-gold";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-8 w-8 text-white"})}),e.jsx(W,{className:"absolute -top-2 -right-2 bg-gold text-white",children:a.level})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:(x=a.level,x>=50?"Lenda do ENEM":x>=30?"Mestre Supremo":x>=20?"Mestre":x>=15?"Expert":x>=10?"Avançado":x>=5?"Intermediário":"Iniciante")}),e.jsxs("p",{className:"text-muted-foreground",children:[a.xp," XP total"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:a.streak}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"dias de sequência"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progresso para próximo nível"}),e.jsxs("span",{children:[a.xpToNext,"/100 XP"]})]}),e.jsx(Z,{value:(100-a.xpToNext)/100*100,className:"h-3"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(u,{className:"h-6 w-6 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[a.totalStudyHours,"h"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Horas estudadas"})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(r,{className:"h-6 w-6 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-2xl font-bold",children:a.questionsAnswered}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Questões respondidas"})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(b,{className:"h-6 w-6 mx-auto mb-2 text-purple-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(a.accuracy),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Taxa de acerto"})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(h,{className:"h-6 w-6 mx-auto mb-2 text-orange-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:["#",a.rank||"---"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Posição no ranking"})]})})]}),e.jsxs($,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-gold"}),"Suas Conquistas"]})}),e.jsx(V,{children:e.jsx("div",{className:"grid gap-3",children:a.badges.map(a=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-center gap-3 transition-all "+(a.unlocked?"border-primary/20 bg-primary/5":"border-gray-200 bg-gray-50 opacity-60"),children:[e.jsx("div",{className:`p-2 rounded-lg ${a.unlocked?m(a.rarity):"bg-gray-200"}`,children:a.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:a.name}),a.unlocked&&e.jsx(W,{className:`text-xs ${m(a.rarity)}`,children:a.rarity})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),!a.unlocked&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requisito: ",a.requirement]})]}),a.unlocked&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gold",children:["+",a.xpReward," XP"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Desbloqueado"})]})]},a.id))})})]}),e.jsxs($,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-purple-500"}),"Missões Especiais"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-4",children:a.achievements.map(a=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsx(W,{variant:a.completed?"default":"outline",children:a.completed?"Completo":"Em progresso"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:a.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[a.progress,"/",a.maxProgress]})]}),e.jsx(Z,{value:a.progress/a.maxProgress*100,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recompensa: ",a.reward]})]})]},a.id))})})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx($,{className:"w-full max-w-md border-gold/30 bg-gradient-to-br from-gold/10 to-gold/5",children:e.jsxs(V,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Badge Desbloqueado!"}),e.jsxs("div",{className:`inline-flex items-center gap-2 p-3 rounded-lg ${m(t.rarity)} mb-4`,children:[t.icon,e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t.description}),e.jsxs("div",{className:"text-lg font-bold text-gold mb-4",children:["+",t.xpReward," XP"]}),e.jsx(G,{onClick:()=>i(null),className:"w-full",children:"Continuar"})]})})})]});var x},Sa=[{name:"Matemática",color:"bg-red-500",icon:"📐"},{name:"Português",color:"bg-blue-500",icon:"📚"},{name:"Biologia",color:"bg-green-500",icon:"🧬"},{name:"Química",color:"bg-yellow-500",icon:"⚗️"},{name:"Física",color:"bg-purple-500",icon:"⚡"},{name:"História",color:"bg-orange-500",icon:"🏛️"},{name:"Geografia",color:"bg-teal-500",icon:"🌍"},{name:"Filosofia",color:"bg-pink-500",icon:"🤔"},{name:"Sociologia",color:"bg-indigo-500",icon:"👥"}],qa=()=>{const[a,s]=E.useState([]),[t,i]=E.useState({totalQuestions:0,totalHours:0,averageAccuracy:0,currentStreak:0,longestStreak:0,weakSubjects:[],strongSubjects:[],studyPattern:"mixed",predictedScore:0,improvementRate:0}),[o,d]=E.useState("30d"),[l,c]=E.useState(!0);E.useEffect(()=>{m()},[o]);const m=async()=>{c(!0);try{const{data:{user:e}}=await X.auth.getUser();if(!e)return;const{data:a}=await X.from("daily_usage").select("*").eq("user_id",e.id).gte("date",x(o)).order("date",{ascending:!0});if(a){const e=p(a);s(e);const t=h(e);i(t)}}catch(e){}finally{c(!1)}},x=e=>{const a=new Date;switch(e){case"7d":return new Date(a.getTime()-6048e5).toISOString();case"30d":default:return new Date(a.getTime()-2592e6).toISOString();case"90d":return new Date(a.getTime()-7776e6).toISOString()}},p=e=>e.map(e=>({date:e.date,questionsAnswered:e.questions_answered||0,studyHours:e.study_hours||0,accuracy:30*Math.random()+70,subjects:{"Matemática":{questions:Math.floor(.3*(e.questions_answered||0)),correct:Math.floor(.3*(e.questions_answered||0)*.8),timeSpent:.3*(e.study_hours||0)},"Português":{questions:Math.floor(.25*(e.questions_answered||0)),correct:Math.floor(.25*(e.questions_answered||0)*.85),timeSpent:.25*(e.study_hours||0)},Biologia:{questions:Math.floor(.2*(e.questions_answered||0)),correct:Math.floor(.2*(e.questions_answered||0)*.75),timeSpent:.2*(e.study_hours||0)},"Química":{questions:Math.floor(.15*(e.questions_answered||0)),correct:Math.floor(.15*(e.questions_answered||0)*.7),timeSpent:.15*(e.study_hours||0)},"Física":{questions:Math.floor(.1*(e.questions_answered||0)),correct:Math.floor(.1*(e.questions_answered||0)*.65),timeSpent:.1*(e.study_hours||0)}}})),h=e=>{const a=e.reduce((e,a)=>e+a.questionsAnswered,0),s=e.reduce((e,a)=>e+a.studyHours,0),t=e.length>0?e.reduce((e,a)=>e+a.accuracy,0)/e.length:0,r=new Date;let i=0;for(let m=e.length-1;m>=0;m--){const a=new Date(e[m].date);if(!(Math.floor((r.getTime()-a.getTime())/864e5)===i&&e[m].studyHours>0))break;i++}const o=Sa.map(a=>{const s=e.reduce((e,s)=>e+(s.subjects[a.name]?.questions||0),0),t=e.reduce((e,s)=>e+(s.subjects[a.name]?.correct||0),0),r=s>0?t/s*100:0;return{name:a.name,accuracy:r,questions:s}}).sort((e,a)=>a.accuracy-e.accuracy),n=o.slice(0,3).map(e=>e.name),d=o.slice(-3).map(e=>e.name),l=Math.min(1e3,Math.max(400,8*t+5*i+2*s)),c=Math.min(100,Math.max(-50,t-70+2*i));return{totalQuestions:a,totalHours:s,averageAccuracy:t,currentStreak:i,longestStreak:Math.max(i,0),weakSubjects:d,strongSubjects:n,studyPattern:"mixed",predictedScore:l,improvementRate:c}},g=(e,a)=>{switch(a){case"accuracy":return e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":"text-red-600";case"score":return e>=800?"text-green-600":e>=700?"text-blue-600":e>=600?"text-yellow-600":"text-red-600";case"improvement":return e>0?"text-green-600":0===e?"text-gray-600":"text-red-600";default:return"text-gray-600"}};return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando analytics..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Analytics Avançado"]}),e.jsx("div",{className:"flex gap-2",children:["7d","30d","90d"].map(a=>e.jsx(G,{variant:o===a?"default":"outline",size:"sm",onClick:()=>d(a),children:"7d"===a?"7 dias":"30d"===a?"30 dias":"90 dias"},a))})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(r,{className:"h-6 w-6 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-bold",children:t.totalQuestions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Questões respondidas"})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(u,{className:"h-6 w-6 mx-auto mb-2 text-green-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[t.totalHours,"h"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Horas estudadas"})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(b,{className:"h-6 w-6 mx-auto mb-2 text-purple-500"}),e.jsxs("div",{className:`text-2xl font-bold ${g(t.averageAccuracy,"accuracy")}`,children:[Math.round(t.averageAccuracy),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Taxa de acerto"})]})}),e.jsx($,{children:e.jsxs(V,{className:"p-4 text-center",children:[e.jsx(w,{className:"h-6 w-6 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-2xl font-bold",children:t.currentStreak}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Sequência atual"})]})})]}),e.jsxs(se,{defaultValue:"overview",className:"w-full",children:[e.jsxs(te,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"overview",children:"Visão Geral"}),e.jsx(re,{value:"subjects",children:"Por Matéria"}),e.jsx(re,{value:"progress",children:"Progresso"}),e.jsx(re,{value:"predictions",children:"Predições"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Evolução do Desempenho"})}),e.jsx(V,{children:e.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:a.slice(-14).map((a,s)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary rounded-t",style:{height:`${Math.max(20,a.accuracy/100*200)}px`,minHeight:"20px"},title:`${a.date}: ${Math.round(a.accuracy)}% acerto`}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(a.date).getDate()})]},s))})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-green-500"}),"Pontos Fortes"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-3",children:t.strongSubjects.map((a,s)=>{const t=Sa.find(e=>e.name===a);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:t?.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a}),e.jsx(Z,{value:85+10*Math.random(),className:"h-2 mt-1"})]}),e.jsx(W,{variant:"outline",className:"text-green-600",children:"Forte"})]},s)})})})]}),e.jsxs($,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-red-500"}),"Áreas de Melhoria"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-3",children:t.weakSubjects.map((a,s)=>{const t=Sa.find(e=>e.name===a);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:t?.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a}),e.jsx(Z,{value:40+20*Math.random(),className:"h-2 mt-1"})]}),e.jsx(W,{variant:"outline",className:"text-red-600",children:"Melhorar"})]},s)})})})]})]})]}),e.jsx(ie,{value:"subjects",className:"space-y-6",children:e.jsx("div",{className:"grid gap-4",children:Sa.map(s=>{const t=a.reduce((e,a)=>e+(a.subjects[s.name]?.questions||0),0),r=a.reduce((e,a)=>e+(a.subjects[s.name]?.correct||0),0),i=t>0?r/t*100:0;return e.jsx($,{children:e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-3xl",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t," questões"]}),e.jsxs("div",{className:`text-sm font-medium ${g(i,"accuracy")}`,children:[Math.round(i),"% acerto"]})]}),e.jsx(Z,{value:i,className:"h-2 mt-2"})]}),e.jsx(W,{variant:"outline",className:g(i,"accuracy"),children:i>=80?"Excelente":i>=70?"Bom":"Precisa melhorar"})]})})},s.name)})})}),e.jsx(ie,{value:"progress",className:"space-y-6",children:e.jsxs($,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Resumo de Progresso"})}),e.jsx(V,{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Sequência de estudos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-orange-500"}),e.jsxs("span",{className:"font-bold",children:[t.currentStreak," dias"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maior sequência"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-gold"}),e.jsxs("span",{className:"font-bold",children:[t.longestStreak," dias"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Taxa de melhoria"}),e.jsxs("div",{className:`flex items-center gap-2 ${g(t.improvementRate,"improvement")}`,children:[e.jsx(b,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-bold",children:[t.improvementRate>0?"+":"",Math.round(t.improvementRate),"%"]})]})]})]})})]})}),e.jsxs(ie,{value:"predictions",className:"space-y-6",children:[e.jsxs($,{className:"border-gold/20 bg-gradient-to-r from-gold/5 to-gold/10",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-gold"}),"Predição da Nota ENEM"]})}),e.jsx(V,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:`text-6xl font-bold ${g(t.predictedScore,"score")}`,children:Math.round(t.predictedScore)}),e.jsx("p",{className:"text-muted-foreground",children:"Baseado no seu desempenho atual e histórico de estudos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium text-green-600",children:"Nota Mínima"}),e.jsx("div",{className:"text-2xl font-bold",children:Math.round(t.predictedScore-50)})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium text-blue-600",children:"Nota Máxima"}),e.jsx("div",{className:"text-2xl font-bold",children:Math.round(t.predictedScore+50)})]})]})]})})]}),e.jsxs($,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Recomendações Inteligentes"})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50 border-blue-200",children:[e.jsxs("h4",{className:"font-medium text-blue-800 mb-2",children:["🎯 Foque em ",t.weakSubjects[0]]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Sua maior oportunidade de melhoria está em ",t.weakSubjects[0],". Dedique 30% do seu tempo de estudo a esta matéria."]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 border-green-200",children:[e.jsxs("h4",{className:"font-medium text-green-800 mb-2",children:["💪 Mantenha ",t.strongSubjects[0]]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Você está indo muito bem em ",t.strongSubjects[0],". Continue revisando para manter o nível alto."]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-purple-50 border-purple-200",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"📈 Estratégia de Estudo"}),e.jsx("p",{className:"text-sm text-purple-700",children:t.studyHours<20?"Aumente suas horas de estudo para pelo menos 2h por dia para melhorar significativamente sua nota.":"Sua dedicação está excelente! Continue assim e foque na qualidade dos estudos."})]})]})})]})]})]})]})},Ca=[{name:"Matemática",icon:"📐",color:"bg-red-500"},{name:"Português",icon:"📚",color:"bg-blue-500"},{name:"Biologia",icon:"🧬",color:"bg-green-500"},{name:"Química",icon:"⚗️",color:"bg-yellow-500"},{name:"Física",icon:"⚡",color:"bg-purple-500"},{name:"História",color:"bg-orange-500"},{name:"Geografia",icon:"🌍",color:"bg-teal-500"},{name:"Filosofia",icon:"🤔",color:"bg-pink-500"},{name:"Sociologia",icon:"👥",color:"bg-indigo-500"}],Ma={"Matemática":["Funções do 1º grau","Funções do 2º grau","Progressões","Geometria Plana","Geometria Espacial","Trigonometria","Estatística","Probabilidade"],"Português":["Interpretação de texto","Gramática","Literatura","Redação","Figuras de linguagem","Variação linguística","Gêneros textuais"],Biologia:["Citologia","Genética","Ecologia","Evolução","Fisiologia humana","Botânica","Zoologia","Biologia molecular"],"Química":["Química orgânica","Química inorgânica","Físico-química","Estequiometria","Termoquímica","Eletroquímica","Cinética química"],"Física":["Mecânica","Termodinâmica","Eletromagnetismo","Óptica","Ondas","Física moderna","Eletrostática","Magnetismo"]},ka=()=>{const[a,s]=E.useState(null),[t,i]=E.useState(1),[o,d]=E.useState(!0),{toast:l}=Q();E.useEffect(()=>{c()},[]);const c=async()=>{d(!0);try{const{data:{user:e}}=await X.auth.getUser();if(!e)return;const{data:a}=await X.from("profiles").select("*").eq("id",e.id).single();if(a){const e=m(a);s(e)}}catch(e){}finally{d(!1)}},m=e=>{const a=e.study_days_available||5,s=[e.main_difficulty||"Matemática"],t=["Português","História"],r=[];for(let i=1;i<=30;i++){const e=new Date;e.setDate(e.getDate()+i-1);const o=e.getDay();if((0===o||6===o)&&a<7)continue;const n=u(i,s,t,2);r.push({day:i,date:e.toISOString().split("T")[0],subjects:n,totalHours:2,completed:!1,progress:0})}return{totalDays:30,currentDay:1,studyDays:r,weakSubjects:s,strongSubjects:t,studyHoursPerDay:2,studyDaysPerWeek:a}},u=(e,a,s,t)=>{const r=[];if(e<=15){const e=a[0];r.push({name:e,topics:x(e,3),duration:Math.floor(60*t*.6),difficulty:"hard",priority:"high"});const s=Ca.filter(a=>a.name!==e),i=s[Math.floor(Math.random()*s.length)];r.push({name:i.name,topics:x(i.name,2),duration:Math.floor(60*t*.4),difficulty:"medium",priority:"medium"})}else{const e=Ca[Math.floor(Math.random()*Ca.length)],a=Ca[Math.floor(Math.random()*Ca.length)];r.push({name:e.name,topics:x(e.name,2),duration:Math.floor(60*t*.5),difficulty:"medium",priority:"high"},{name:a.name,topics:x(a.name,2),duration:Math.floor(60*t*.5),difficulty:"medium",priority:"medium"})}return r},x=(e,a)=>(Ma[e]||[]).sort(()=>.5-Math.random()).slice(0,a),p=e=>{switch(e){case"easy":return"text-green-600 bg-green-50 border-green-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"hard":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50"}},h=a=>{switch(a){case"high":return e.jsx(S,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(r,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(n,{className:"h-4 w-4 text-green-500"});default:return e.jsx(r,{className:"h-4 w-4"})}},g=e=>{const a=Math.floor(e/60),s=e%60;return a>0?s>0?`${a}h ${s}min`:`${a}h`:`${s}min`};if(o)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerando seu cronograma personalizado..."})]})});if(!a)return e.jsx($,{children:e.jsxs(V,{className:"p-8 text-center",children:[e.jsx(S,{className:"h-12 w-12 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cronograma não disponível"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete o onboarding primeiro para gerar seu cronograma personalizado."})]})});const j=a.studyDays.slice(7*(t-1),7*t),v=Math.ceil(a.studyDays.length/7),b=a.studyDays.filter(e=>e.completed).length,N=b/a.studyDays.length*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Seu Cronograma de 30 Dias"}),e.jsxs("p",{className:"text-muted-foreground",children:["Personalizado para ",a.studyDaysPerWeek," dias por semana"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[b,"/",a.studyDays.length]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"dias concluídos"})]})]}),e.jsx(Z,{value:N,className:"h-3 mb-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"Progresso geral"}),e.jsxs("span",{children:[Math.round(N),"%"]})]})]})}),e.jsx($,{children:e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Semana ",t," de ",v]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{variant:"outline",size:"sm",onClick:()=>i(Math.max(1,t-1)),disabled:1===t,children:"Anterior"}),e.jsx(G,{variant:"outline",size:"sm",onClick:()=>i(Math.min(v,t+1)),disabled:t===v,children:"Próxima"})]})]})})}),e.jsx("div",{className:"grid gap-4",children:j.map((r,i)=>e.jsxs($,{className:""+(r.completed?"border-green-200 bg-green-50":"border-border"),children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold "+(r.completed?"bg-green-500":"bg-primary"),children:r.completed?e.jsx(n,{className:"h-4 w-4"}):r.day}),e.jsxs("div",{children:[e.jsxs(J,{className:"text-lg",children:["Dia ",r.day," - ",new Date(r.date).toLocaleDateString("pt-BR")]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.totalHours,"h de estudo • ",r.subjects.length," matérias"]})]})]}),!r.completed&&e.jsx(G,{size:"sm",onClick:()=>(e=>{if(!a)return;const t=[...a.studyDays];t[e].completed=!0,t[e].progress=100,s({...a,studyDays:t}),l({title:"Dia concluído! 🎉",description:"Parabéns por completar mais um dia de estudos!"})})(7*(t-1)+i),children:"Marcar como Concluído"}),r.completed&&e.jsxs(W,{className:"bg-green-500 text-white",children:[e.jsx(n,{className:"h-3 w-3 mr-1"}),"Concluído"]})]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-3",children:r.subjects.map((a,s)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:Ca.find(e=>e.name===a.name)?.icon||"📚"}),e.jsx("h4",{className:"font-medium",children:a.name}),h(a.priority)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:`text-xs ${p(a.difficulty)}`,children:a.difficulty}),e.jsx("span",{className:"text-sm text-muted-foreground",children:g(a.duration)})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Tópicos:"})," ",a.topics.join(", ")]})]},s))})})]},r.day))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-blue-500"}),"Foco Principal"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:a.weakSubjects.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm",children:a}),e.jsx(W,{variant:"outline",className:"text-red-600 border-red-200",children:"Prioridade Alta"})]},s))})})]}),e.jsxs($,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-gold"}),"Suas Forças"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:a.strongSubjects.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:a}),e.jsx(W,{variant:"outline",className:"text-green-600 border-green-200",children:"Forte"})]},s))})})]})]})]})},Pa={dashboard:{id:"dashboard",title:"Dashboard Inicial",description:"Seu centro de comando para os próximos 30 dias",icon:P},flashcards:{id:"flashcards",title:"Flashcards Gratuitos",description:"Revise com flashcards inteligentes por matéria",icon:r},checklist:{id:"checklist",title:"Checklist Essencial",description:"Tópicos com 80%+ de recorrência no ENEM",icon:r},"daily-question":{id:"daily-question",title:"Questão do Dia",description:"Uma questão recorrente do ENEM com explicação completa",icon:r},"ai-tip":{id:"ai-tip",title:"Dica da IA",description:"Dica diária de estudo gerada por IA personalizada",icon:q},notificacoes:{id:"notificacoes",title:"Notificações Básicas",description:"Configure lembretes diários de estudo",icon:q},gamificacao:{id:"gamificacao",title:"Gamificação",description:"Sistema de badges, XP e conquistas",icon:r},analytics:{id:"analytics",title:"Analytics Avançado",description:"Análise detalhada do seu progresso",icon:r},cronograma:{id:"cronograma",title:"Cronograma Personalizado",description:"Plano de estudos adaptado ao seu perfil",icon:r}},Ea=()=>{const{tabId:a}=A(),[t,i]=E.useState(null),[o,n]=E.useState(!1),[d,l]=E.useState(!0),[c,m]=E.useState(!1),[x,p]=E.useState(!1),{toast:h}=Q(),g=_();E.useEffect(()=>{j(),f()},[a]);const f=async()=>{try{const{data:{user:e}}=await X.auth.getUser();if(!e)return;const{data:a}=await X.from("profiles").select("onboarding_completed").eq("id",e.id).single();a&&!a.onboarding_completed&&m(!0)}catch(e){}},j=async()=>{try{const{data:{user:e}}=await X.auth.getUser();if(!e){if(a&&a in Pa){const e=Pa[a];return i({id:e.id,title:e.title,description:e.description,price:0}),n(!0),void l(!1)}if(a){const{data:e}=await X.from("ebooks").select("*").eq("id",a).maybeSingle();return e&&i(e),n(!0),void l(!1)}}if(!e)return void g("/auth");if(a&&a in Pa){const e=Pa[a];return i({id:e.id,title:e.title,description:e.description,price:0}),n(!0),void l(!1)}const{data:s,error:t}=await X.from("ebooks").select("*").eq("id",a).maybeSingle();if(t)throw t;return s?(i(s),n(!0),void l(!1)):void l(!1)}catch(e){h({title:"Erro ao carregar conteúdo",description:"Tente novamente mais tarde.",variant:"destructive"})}finally{l(!1)}};return d?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})}):t?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between px-4 py-4",children:[e.jsxs(D,{to:"/tabs",className:"flex items-center gap-2 text-foreground hover:text-primary",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Voltar"})]}),e.jsx("h1",{className:"text-xl font-bold text-center flex-1",children:e.jsx("span",{className:"text-gold",children:t.title})}),e.jsx("div",{className:"w-20"})]})}),e.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-12",children:o?a&&a in Pa?e.jsxs("div",{className:"space-y-8",children:["dashboard"===a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl bg-primary/10 p-6 text-center",children:[e.jsx(C,{className:"mx-auto mb-2 h-8 w-8 text-primary"}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:"30"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Dias até o ENEM"})]}),e.jsxs("div",{className:"rounded-xl bg-primary/10 p-6 text-center",children:[e.jsx(r,{className:"mx-auto mb-2 h-8 w-8 text-primary"}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:"0%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Progresso Atual"})]}),e.jsxs("div",{className:"rounded-xl bg-primary/10 p-6 text-center",children:[e.jsx(u,{className:"mx-auto mb-2 h-8 w-8 text-primary"}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:"0h"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Horas de Estudo"})]})]}),e.jsxs("div",{className:"card-premium",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-semibold text-primary",children:"Citação Motivacional do Dia"})]}),e.jsx("p",{className:"italic text-foreground",children:'"O sucesso é a soma de pequenos esforços repetidos dia após dia."'})]})]}),"daily-question"===a&&e.jsxs("div",{className:"card-premium",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold",children:"🎯 Questão Recorrente do Dia"}),e.jsx("p",{className:"text-muted-foreground",children:"Conteúdo em desenvolvimento. Em breve você terá acesso a questões diárias do ENEM."})]}),"flashcards"===a&&e.jsx(Ye,{}),"checklist"===a&&e.jsx(Ze,{}),"ai-tip"===a&&e.jsx(_a,{}),"notificacoes"===a&&e.jsx(pa,{}),"gamificacao"===a&&e.jsx(ya,{}),"analytics"===a&&e.jsx(qa,{}),"cronograma"===a&&e.jsx(ka,{})]}):e.jsx($e,{ebookId:a||"",hasAccess:o,ebookPrice:t.price,ebookTitle:t.title}):e.jsxs("div",{className:"card-premium text-center max-w-2xl mx-auto",children:[e.jsx(s,{className:"h-16 w-16 text-primary mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Conteúdo Bloqueado"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:t.description}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-4xl font-bold text-gold mb-2",children:["R$ ",t.price?.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"pagamento único"})]}),e.jsx(D,{to:"/pricing",children:e.jsxs(G,{className:"btn-premium w-full max-w-sm",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Desbloquear Agora"]})})]})}),c&&e.jsx(ba,{onComplete:()=>{m(!1),p(!0)}})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Conteúdo não encontrado"}),e.jsx(D,{to:"/tabs",children:e.jsx(G,{variant:"outline",children:"Voltar"})})]})})},_a=()=>{const[a,s]=E.useState(""),[t,r]=E.useState(!1),[i,o]=E.useState(!1),{toast:n}=Q();return e.jsxs("div",{className:"card-premium",children:[e.jsxs("h3",{className:"mb-2 text-xl font-semibold flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),"Dica da IA"]}),e.jsxs("p",{className:"mb-6 text-sm text-muted-foreground",children:["A IA personalizada está em desenvolvimento. Entre na lista de espera e receba automaticamente ",e.jsx("span",{className:"font-semibold text-gold",children:"70% de desconto"}),"por ser assinante do NeuroHack quando liberarmos o acesso."]}),i?e.jsx("div",{className:"rounded-xl border border-primary/30 bg-primary/10 p-4",children:e.jsxs("p",{className:"text-sm",children:["✅ Pronto! Você está na lista de espera. Assim que a IA for liberada, enviaremos seu acesso com ",e.jsx("span",{className:"font-semibold text-gold",children:"70% de desconto"}),"."]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-muted-foreground",children:"Número de telefone (WhatsApp)"}),e.jsx(oe,{type:"tel",inputMode:"tel",placeholder:"+55 (DDD) 9XXXX-XXXX",value:a,onChange:e=>s(e.target.value)}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Usaremos apenas para avisar quando a IA for liberada e enviar seu desconto."})]}),e.jsx(G,{className:"btn-premium",onClick:async()=>{const e=a.replace(/\D/g,"");if((e=>e.length>=10&&e.length<=13)(e)){r(!0);try{const a={phone:e,source:"ai_tip_tab",discount_percent:70,created_at:(new Date).toISOString()};let r=null;try{const{error:e}=await X.from("ai_waitlist").insert([a]);r=e||null}catch(s){r=s}if(r){const s={telefone:e,fonte:"ai_tip_tab",desconto_percentagem:70,criado_em:(new Date).toISOString()};try{const{error:e}=await X.from("lista_de_espera_ai").insert([s]);if(e)throw e}catch(t){const e=JSON.parse(localStorage.getItem("ai_waitlist")||"[]");e.push(a),localStorage.setItem("ai_waitlist",JSON.stringify(e))}}o(!0),n({title:"Entrada confirmada",description:"Você está na lista de espera e receberá 70% de desconto.",duration:4e3})}catch(i){n({title:"Erro ao registrar",description:"Tente novamente em instantes.",duration:3500})}finally{r(!1)}}else n({title:"Número inválido",description:"Informe um telefone válido com DDD (WhatsApp).",duration:3500})},disabled:t||!a.trim(),children:t?"Registrando...":"Entrar na lista de espera"})]})]})};export{Ea as default};
